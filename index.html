<!-DOCTYPE html>
<html>
<head>
	<link href="https://fonts.googleapis.com/css?family=Quicksand|Sofia" rel="stylesheet">
	<link rel="stylesheet" href="styles.css">
	<title>The More the Merrier</title>

</head>
<body>
	<header>
		<h1>more the merrier</h1>
		<h2 id="welcome">New connections. New relationships. Building a better community.</h2>
<!--		<nav id="navbar">
			<a>create an event</a>
			<div class="dropdown">
			  <button class="dropbtn">find an event</button>
			  <div class="dropdown-content">
				<a href="#">sports games</a>
				<a href="#">parties</a>
				<a href="#">other</a>
			  </div>
			</div>
		</nav>
-->
	</header>
			
	<div style="clear:both;"> </div>
	
<!-- W3 Slideshow -->
	<!-- Slideshow container -->
<div class="slideshow-container">

  <!-- Full-width images with number and caption text -->
  <div class="mySlides fade">
    <div class="numbertext">1 / 3</div>
    <img src="https://www.latfusa.com/media/uploads/2017/10/04/lacma12.jpg" style="width:100%">
    <div class="text">Caption Text</div>
  </div>

  <div class="mySlides fade">
    <div class="numbertext">2 / 3</div>
    <img src="https://www.freshcup.com/wp-content/uploads/2018/02/Artifact_MAIN_1015x575-894x372.jpg" style="width:100%">
    <div class="text">Caption Two</div>
  </div>

  <div class="mySlides fade">
    <div class="numbertext">3 / 3</div>
    <img src="https://www.ggp.com/content/dam/ggp-digital-assets/Images/Mall-Images/Exteriors/malloflouisiana-hero-04.jpg/_jcr_content/renditions/original.jpg" style="width:100%">
    <div class="text">Caption Three</div>
  </div>

  <!-- Next and previous buttons -->
  <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
  <a class="next" onclick="plusSlides(1)">&#10095;</a>
</div>

<!-- The dots/circles -->
<div style="text-align:center">
  <span class="dot" onclick="currentSlide(1)"></span> 
  <span class="dot" onclick="currentSlide(2)"></span> 
  <span class="dot" onclick="currentSlide(3)"></span> 
</div>
	
		<p class="blocks"><strong>Discover</strong> events in your community through More the Merrier, or upload your own events to be viewable by the community.
			<br><br>
			<strong>Explore</strong> surrounding businesses, parks, or venues in the area to find out everything your growing communities have to offer!
			<br><br>
			<strong>Find</strong> out whether nearby venues provide services or accommodations you need to feel comfortable.
		
		</p>
	<div class="blocks" style="width: 28%;">
		<h4>Find an event</h4>
		
		<br>
		
		<form id="mapsearch" action="/foursquare" method="post">
			<label for="input">Enter keyword: </label>
			<input id="input" type="text" name="location" value="food">
			<input id="submitbtn" type="submit" value="Search">
		</form>
	<!-- I've ID'd both the "search" and "find location" button the same for easy styling-->
		<button id="submitbtn" type="button" onclick="getLatLong()" style="margin-top:10;">
			Find my location</button>

		
		<div style="clear:both;"> </div>		
		
		<br>
		
		<h4>We found these events:
		
		<br>
		<br>
		<br>
		
		<h4>Places nearby:</h4>
			<div style="clear:both;"> </div>		
			<div>
				<img class="nearbyphoto" src="#" alt="Nearby Location" style="margin-left:0">
				<img class="nearbyphoto" src="#" alt="Nearby Location">
				<img class="nearbyphoto" src="#" alt="Nearby Location">
			</div>
	</div>

<!-- google maps (anh) I've renamed buttons and added id/class names for styling-->
    <div id="map" class="blocks"></div>
	
    <script>  
      var dataobj = {lat: 1.1,lng: 1.1}
      var map = {}	
      function initMap() {
		//console.log(obj.lat);
        var uluru = {lat: dataobj.lat, lng: dataobj.lng};
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 4,
          center: uluru
        });
        var marker = new google.maps.Marker({
          position: uluru,
          map: map
        });
      }
      function getLatLong() {
        console.log(dataobj);
        var latlng = dataobj
        /*
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          
          document.getElementById("map").innerHTML = "hello world";
          console.log("got it");
        }
        */
        $.ajax({
    type: "GET",
    dataType: "jsonp",
    cache: false,
    url: 'https://api.foursquare.com/v2/venues/explore?ll=' + latlng.lat + ',' + latlng.lng + '&limit=30&client_id=COHMOQH1IRCXSHOSCJQGCHMW0KDM15T2SL42SV4HEXZNCZ1O&client_secret=T10V523SUH04DKHMUVAUQSBECBLVCPMKHDR5BFJDHLX3I5CB&query=pho&v=20180331',
    success: function(data){
        console.log(data);
    	var base = data.response.groups[0].items
    	$.each(base, function(index){
    		var url = base[index].venue.url;
    		var llat = base[index].venue.location.lat;
    		var llng = base[index].venue.location.lng;
    		var name = base[index].venue.name;
    		var icon = base[index].venue.categories[0].icon;
/*
    		var myIcon = L.icon({
    		    iconUrl: icon,
    		    iconSize: [20, 20],
    		    iconAnchor: [10, 10],
    		    className: '4sq-icon'
    		});
    		var marker = L.marker([llat, llng], {icon: myIcon}).addTo(map);
    		var content = '<a href="' + url + '" />' + name + '</a>'
    		marker.bindPopup(content)
*/
    	})
    }
});
      }
      $.ajax({
        type: "GET",
        url: "http://localhost:8000/latlng",
        success: function(data) {
          dataobj = data;
          console.log(data);
        }
      });
      
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC23xU5BZyTpbqTH-FaQWgUpgNGdswo-N0&callback=initMap">
    </script>
	</div>
	
	
	<script src="scripts.js"></script>
</body>
</html>